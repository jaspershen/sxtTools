---
title: "R语言stringr包的使用"
output:
  pdf_document: default
  word_document: default
  html_notebook: default
  html_document:
    df_print: paged
---

### 最近还在适应美帝的生后，并且因为还没有开始新的课题，所以晚上时间会比较充裕一些，一直在看**R for data science**这本书，前面一直没有记笔记，后面觉得还是需要养成记笔记的习惯。所以从今天开始，即使每天少看一些，也要记下来自己的读书笔记。今天就从字符串处理stringr包开始，也是第一部分。

需要先加载包

```{r, eval=TRUE}
library(tidyverse)
library(stringr)
```

### 1 string lenght

如何查看一个字符串中字符的长度

```{r, eval=TRUE}
str_length(c("a", "R for data science", NA))
```

### 2 合并字符串

```{r, eval=TRUE}
str_c("x", "y")
str_c("x", "y", "z")
```

同样可以使用*sep*参数来控制合并时中间分隔符。

```{r, eval=TRUE}
str_c("x", "y", sep = ",")
```

和很多其他函数一样，NA值是一个问题，比如下面的例子，这时候可以使用`str_replace_na()`函数来处理：

```{r, eval=TRUE}
x <- c("abc", NA)
str_c("|-", x, "-|")
str_c("|-", str_replace_na(x), "-|")
```

同样从上面的例子也可以看到，`str_c`是一个vector函数，他会将长度较短的对象循环，使其与长度最长的对象长度一样。

```{r, eval=TRUE}
str_c("prefix-", c("a", "b", "c"), "-suffix")
```

下面要简单介绍一下在`str_c`中非常有用的两个参数，`sep`和`collapse`。其中`collapse`非常形象，`坍塌`，也就是将一个向量中的多个对象合并为一个字符。可以看下面的例子：


```{r, eval=TRUE}
str_c(c("x", "y", "z"), collapse = ", ")
str_c(c("x", "y", "z"), sep = ", ")
```

### 3 提取字字符

有时候我们需要一个字符串中的某部分，这时候可以使用`str_sub()`。

```{r, eval=TRUE}
x <- c("Apple", "Banana", "Pear")
str_sub(string = x, start = 1, end = 3)
```

该函数一共有三个参数，start和end分别是指从哪开始和结束提取字符串。
还可以反过来提取字符串，也就是将参数设置为负数。


```{r, eval=TRUE}
str_sub(x, -3, -1)
```

### 4 区域设置

对于某些规定，不同国家或者地区不太一样，比如排序，默认英语里面的排序是按照英语字母顺序，但是不同地方可能不一样，比如下面的例子：

```{r, eval=TRUE}
x <- c("apple", "eggplant", "banana")
str_sort(x, locale = "en")  # English
str_sort(x, locale = "haw") # Hawaiian
```

感觉这个功能不会太常用。了解一下就好了。


